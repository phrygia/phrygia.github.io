{"componentChunkName":"component---src-templates-blog-template-js","path":"/gatsby-blog/","result":{"data":{"cur":{"id":"69389367-c292-5abf-a29a-0a25d66c37ee","html":"<p>최근 jekyll로 사용하던 블로그를 gatsby로 바꾸었다. <br>\n처음에 jekyll을 선택했었던 이유를 github으로 시작할 생각이었고 테마가 다양했던 jekyll을 선택했었다.<br><br></p>\n<h2 id=\"jeykll에서-gatsby로-이전한-이유는\" style=\"position:relative;\"><a href=\"#jeykll%EC%97%90%EC%84%9C-gatsby%EB%A1%9C-%EC%9D%B4%EC%A0%84%ED%95%9C-%EC%9D%B4%EC%9C%A0%EB%8A%94\" aria-label=\"jeykll에서 gatsby로 이전한 이유는 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jeykll에서 Gatsby로 이전한 이유는?</h2>\n<p>가장 큰 이유는 Jeykll은 Ruby로 만들어졌기 때문에 JS를 주언어로 사용하는 필자에게 어려우면서 생소했다. 프론트엔드 개발자가 많이 쓰는 gatsby는 react를 사용하는 나에게 쉬우면서도 재밌게 다가왔고 npm 플러그인을 쉽게 추가할 수 있어 다양한 기능을 다루기 수월했기 때문에 블로그 이전을 감행했다. (또한 전보다 많아진 테마도 마음에 들었다.)<br><br></p>\n<p>나는 zoomkoding님의 <a href=\"https://github.com/zoomKoding/zoomkoding-gatsby-blog\" target=\"_blank\">zoomkoding-gatsby-blog</a>테마를 사용하여 블로그를 개설했다. <br>\n깃허브 테마는 심플한 테마가 많지만 zoomkoding님의 테마는 블랙/화이트 모드 선택 및 과하지 않게 동적인 요소들이 마음에 들어 이 테마로 블로그를 개설했다.<br><br><br></p>\n<h2 id=\"google-search-console에-gatsby-블로그-등록하기\" style=\"position:relative;\"><a href=\"#google-search-console%EC%97%90-gatsby-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EB%93%B1%EB%A1%9D%ED%95%98%EA%B8%B0\" aria-label=\"google search console에 gatsby 블로그 등록하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Google Search Console에 gatsby 블로그 등록하기</h2>\n<ol>\n<li><a href=\"https://search.google.com/search-console/about\" target=\"_blank\">google search console </a> 사이트에 접속한다.</li>\n<li>속성 추가 → URL 접두어 → 소유권 확인 (HTML 태그 : react-helmet을 이용해 meta 등록 )\n<br><br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 80.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAABYlAAAWJQFJUiTwAAACa0lEQVQoz3WSS2/TQBDH/dHgxAkhkEDiVMRDXIA7pdxApa1AtL2gfgjOIFRRUrVpuo7jxu930jiNY8dJQ9aOvXZsxu4rIDr6yxqv9+eZ+e9Stxee33ny4t6zV3efvrxxf+Ef3Xzw6L+CT7cePqaWPnx6v7m1vLn1bv3L0trG27WNpQu9WV1fnNfK58WVi3xt4/XyR6rnOL3BqON4dn9g9z3b8bquf+L5tjuYhNOckDyOiycoSQoRkkGepqeeR2mGyUg64hVaUAy73+75jKjTvFpryh3HzTGepWk2g0gnE4yDsMxneZb5nQ6lWy1OsxhRE/V2EMZRFLXtLvANSTtxB3kYZlkOkc4yre06rgd5uZAPu11KN1ucah0pUN/gZJXV3H3+mFONungJF5tjkpy4Q9cfpVD2CrZaQNK8ctiUv+9Wv/4St2n9SNYu4SSFxlMchuMJngTTv2Cz1Ybxvu0e/NhD29X6QaPZEBWYAjrv9Pp5gH/jwPGH3uj0tISTNM3n22YVE/EyFEecVBdUaKSpGMADnOEJlCJJQpI0IkkE3SdzsGG16qK+x0j7rFzjdCSYSDAK8edtE0LAxTguvIRICJmBC+C2bZewoP2ssRXEgaqsTAsGPQcDiDEmFwHzX8GF2xp4ZjRVk5V1VtKLvGx73m0ION6sxM5Wzma2GrJJCyrYizjwXIKkyHkFLlwB5+cBRUnp1vk5Q2VwWz/uymZbsY7nJRktbzjKApxgnAZBCk+Ms+k0C0N4zafTAcC+7xc/yy4LXB/QdxTN4jgrr+d4PKZ2dnYYhkEI0ddFvX4m2LFfrYIOEaohVKlU/gDx6C4+zdJ2XgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"search.png\"\n        title=\"search.png\"\n        src=\"/static/8df92c4f0d4e87f698f68ea30faf4b2d/37523/search.png\"\n        srcset=\"/static/8df92c4f0d4e87f698f68ea30faf4b2d/e9ff0/search.png 180w,\n/static/8df92c4f0d4e87f698f68ea30faf4b2d/f21e7/search.png 360w,\n/static/8df92c4f0d4e87f698f68ea30faf4b2d/37523/search.png 720w,\n/static/8df92c4f0d4e87f698f68ea30faf4b2d/302a4/search.png 1080w,\n/static/8df92c4f0d4e87f698f68ea30faf4b2d/07a9c/search.png 1440w,\n/static/8df92c4f0d4e87f698f68ea30faf4b2d/b0de5/search.png 1517w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<br></li>\n<li>gatsby-plugin-sitemap 설치</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">npm i gatsby<span class=\"token operator\">-</span>plugin<span class=\"token operator\">-</span>sitemap\nyarn add gatsby<span class=\"token operator\">-</span>plugin<span class=\"token operator\">-</span>sitemap</code></pre></div>\n<p>내가 설치한 테마의 gatsby 버전이 낮은편이라 yarn add gatsby-plugin-sitemap을 입력했을때 높은버전의 플러그인이 설치되었기 때문에 warning 경고가 떴었다. 자신의 gatsby와 호환되는 버전의 플러그인을 설치하자!</p>\n<div style=\"display:inline-block\">\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 350px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.111111111111107%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABLklEQVQY0y2Q65KCMAxGfQ6loCiUlrYgN1EB0V1XV3f2/d9kZ4wmW9EfZ9JkOme+ZOT7/l0WFa4uv5i2PS53e4xkjP7UQ8MX2GYGN6nCUgmMpUDX89AbcNF13fd7gGx/G1nhQxYllV8XMtuOzKYlmZdUnK6UHb9JpBn5nktLvqBKBFTHIW2NoFxJGjOXHIfR2HFwPHGeQhj5s9lDWEF5uqIVWlrU6wbTrsf8cESZ5chNivYPlv0Bs6bDSGmMeYCp4CiDOVYqwkpLmjB2ewrxJbxQ8k6YNL2tDaXdnvR6a2mGefHcws4jzkmFCypVRCstqJCcjIjI86ZDwpu9IVTnH0iaHdiElg6StofscARV1bDsPyD/PIOpNzBjDuhwDrtMQ60F2HQQBCHYle+Msb9/PPqZkbXtQfgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"package.png\"\n        title=\"package.png\"\n        src=\"/static/f4d32a8abc5c097e45f1185316eb25e1/13ae7/package.png\"\n        srcset=\"/static/f4d32a8abc5c097e45f1185316eb25e1/e9ff0/package.png 180w,\n/static/f4d32a8abc5c097e45f1185316eb25e1/13ae7/package.png 350w\"\n        sizes=\"(max-width: 350px) 100vw, 350px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n</div>\n<br><br>\n<ol start=\"4\">\n<li>gatsby-config.js 파일에 <code class=\"language-text\">gatsby-plugin-sitemap</code>추가한다.</li>\n</ol>\n<div style=\"display:inline-block\">\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 350px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACrUlEQVQ4y3WUSW8TQRCF/SNCHHt2M7tn857xkvFCAAmEgAtHhEAKF34/YvD043XbDiYJh1J197i+frW0W535ZH+xWzbtSdHoo7y5WJfN5WzYXA3SJg7DJorCRut2Gl3TaF3lTdNsDMNQ/swEz+qW6dgimkxRrHeYvX2PfPcSw9vXSK7nCNIMo90r5KsK+bJCcbNBlOUgFATAOJpaG4a0fcuyrMZxeuj1ekKa6/nCDSPh+r5w5D4Ihaf2gfJ+GApT14VSRDMNQ62P0H3LtizxPEnh5ANBg+YFMBwHbV3HpTSqOdmzblf5zkmZVHVQqIC0fcuwbTEthvhYLsS7+QKvsww718XGsbG2TCxNAyv+uLIsbHl2w7Oy04V9gtH/A9QcR0zabdzZhrhLfHzv+/gSefjWD/Ajj/E5cPE15nkaqf0nt4cP7Su4VK8/BbSp0OTt13EgNgyo0hhl5OMmibDL+xj7LuZxgC2/+bYDmyn3Dg24b8YjoLypIHA7yVGNUsyyGIsiwXacY0zwepRhyrPlIMGbcog0CiBF/IU+AMpaDAlcFn3MGTgj5JopVgQUVFtyvRmm6LFZOiEW62idAY8z+Bi4pZKKgZN+iBXhuzHnkOlKuLyoZAlilqCjG+hq+nnaj1OWQAmToFIG09bcS+CMwEkSUnmoSiFLkofeedpPKIwIZIorBozY4QXVbFlPGThNDumngYeMe3lJwjUH/2mg/iBlqe4AzJSyJdcKGPrQTAudrgZN/3/KjXxCUiEDxTyPBWsoCJWKBRUJ1lBMEz5B1xWObQn5uqzT0zMPT+8I/32vcMBunjelGqR4wbGRzbjlOEnVqhxMd8zvDjv+YBalbyTwF4H1uB/UBNSE1lRTU1W9GaU1Fdc3g6Sm+prp83taE177nlfLvyuClD/azz8vpdLZ/vsEpAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"serach4.png\"\n        title=\"serach4.png\"\n        src=\"/static/75860cee561d3b71e1467161af0f84ac/13ae7/serach4.png\"\n        srcset=\"/static/75860cee561d3b71e1467161af0f84ac/e9ff0/serach4.png 180w,\n/static/75860cee561d3b71e1467161af0f84ac/13ae7/serach4.png 350w\"\n        sizes=\"(max-width: 350px) 100vw, 350px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n</div>\n<br><br>\n<ol start=\"5\">\n<li>build (build를 해야 sitemap.xml 파일이 생성된다.)</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">yarn <span class=\"token function\">build</span> <span class=\"token punctuation\">(</span>or gatsby build<span class=\"token punctuation\">)</span></code></pre></div>\n<br>\n<ol start=\"6\">\n<li>build가 끝나면 로컬 서버를 실행한다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">yarn <span class=\"token function\">develop</span> <span class=\"token punctuation\">(</span>or gatsby develop<span class=\"token punctuation\">)</span></code></pre></div>\n<br>\nlocalhost:8000/sitemap.xml에 접속하면 다음 화면과 같이 xml파일이 생성된 걸 확인할 수 있다.<br><br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA10lEQVQY042Q227EIAwF+f+PzI0sgaxxIIABR5uUbbV9qtSM/GRpzpEttJTLNE6jGae1H0zXLUMnx1495Cz7se+/N8OqlDOrA9hDiPRBpCegXJTalHRq3lcTdxuDLxRz8sG7ihtbrNYW7znEg+vr+iAIM0ywKm0VxD0QpVrqwcd1ntd/iAQRJYIGpx0FYuZaCxc+X2+5JfzOHzJhstI+9RM1Bhcy5R/tDoI2wtm+m41LIZVS2ic483UjQeQmPxAMbBrjHpvcDr5ZLsimbUZrrDcux3zfbHwBryXO8Hox7AsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"search2.png\"\n        title=\"search2.png\"\n        src=\"/static/2213e8eef411815dfc9a641d25cab611/37523/search2.png\"\n        srcset=\"/static/2213e8eef411815dfc9a641d25cab611/e9ff0/search2.png 180w,\n/static/2213e8eef411815dfc9a641d25cab611/f21e7/search2.png 360w,\n/static/2213e8eef411815dfc9a641d25cab611/37523/search2.png 720w,\n/static/2213e8eef411815dfc9a641d25cab611/302a4/search2.png 1080w,\n/static/2213e8eef411815dfc9a641d25cab611/07a9c/search2.png 1440w,\n/static/2213e8eef411815dfc9a641d25cab611/14586/search2.png 2314w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<br></p>\n<ol start=\"7\">\n<li>사이트맵 추가</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">yarn <span class=\"token function\">deploy</span> <span class=\"token punctuation\">(</span>or gatsby deploy<span class=\"token punctuation\">)</span></code></pre></div>\n<p>gatsby 변경사항을 사이트에 업로드 한다. github 페이지에서 sitemap.xml이 제대로 보여진다고 Google Search Console에서 새 sitemap.xml을 제출한다. <br><br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB0UlEQVQ4y51SyUoDQRTs7xNEPXjwIC4oGlFBTy4Xl+/z4K4QY4yZGONMJtvs3VN29aTDKIJooHjTr9+rV6/SYmp5A/Obe5iv7GNufRezazuYWqqgcniGreNzVI501CjiOTYOTjVOsLR3aOpnVrcxvbJleqYXFiGur55xc1fF7eMjHqpPqL284uLyGle392g4b3hpOqgTr19RazRNLfGkUa03UKvXId5bH2g5LXiuC89zMej3EYYBgtEIaZJAKYlcqTFkCeoLkOe6VkH4PR+dTgdBEGCoSRijKILv+3D1ECmlhkKmIRWbfkaWZUjTFCKOYwyHQ3OwYI6kYRiaAX6/wChMEESZRlpChihOMNJi2CdI5noeBoMBEr0ik7ykOqrk5DxXZh0Drbj4lgVksT7r2C9c10Oj2TTNJCcZ1REFWT4ho3qeOZR3zPFMIjkeJAyBXo0FLOQlyZhnMX/Mc3VaYK3ItW9JlkLlhWq7meCqXI9F1j/GsgJO59lGW5uO17R3xkNObrfbE7+sjzb+BGtJHJW+xz2GsNvtotfrmYRF+V//CwyhfTZldf+FIaSP5TX/QmCFTBRSHQlp6n9W/d4jPP2oHccxHtJc+zx+A2vLCu33JwbPay8mWl1HAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"search3.png\"\n        title=\"search3.png\"\n        src=\"/static/152b503f83f60f76d6aaddb2bf4c7ab0/37523/search3.png\"\n        srcset=\"/static/152b503f83f60f76d6aaddb2bf4c7ab0/e9ff0/search3.png 180w,\n/static/152b503f83f60f76d6aaddb2bf4c7ab0/f21e7/search3.png 360w,\n/static/152b503f83f60f76d6aaddb2bf4c7ab0/37523/search3.png 720w,\n/static/152b503f83f60f76d6aaddb2bf4c7ab0/302a4/search3.png 1080w,\n/static/152b503f83f60f76d6aaddb2bf4c7ab0/07a9c/search3.png 1440w,\n/static/152b503f83f60f76d6aaddb2bf4c7ab0/92bee/search3.png 2340w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><br><br></p>\n<h2 id=\"gatsby-블로그에-google-analytics-추적코드-심기\" style=\"position:relative;\"><a href=\"#gatsby-%EB%B8%94%EB%A1%9C%EA%B7%B8%EC%97%90-google-analytics-%EC%B6%94%EC%A0%81%EC%BD%94%EB%93%9C-%EC%8B%AC%EA%B8%B0\" aria-label=\"gatsby 블로그에 google analytics 추적코드 심기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gatsby 블로그에 Google Analytics 추적코드 심기</h2>\n<ol>\n<li><a href=\"https://analytics.google.com/\" target=\"_blank\">구글 애널리틱스</a> 계정 만들기</li>\n<li>속성에 내 블로그 정보 추가하기</li>\n<li>gatsby-plugin-gtag 설치</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">npm i gatsby<span class=\"token operator\">-</span>plugin<span class=\"token operator\">-</span>gtag\nyarn add gatsby<span class=\"token operator\">-</span>plugin<span class=\"token operator\">-</span>gtag</code></pre></div>\n<br>\n<ol start=\"4\">\n<li>gatsby-config.js 파일에 <code class=\"language-text\">gatsby-plugin-gtag</code> 옵션을 추가한다.</li>\n</ol>\n<div style=\"display:inline-block\">\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 400px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/UlEQVQoz4WRSW7DMAxFfQ2PpGjZmj0rqZ266YS0i97/PJUDpKs4/RAICOIjqc9IdsPw+mEOJ9O2Ssksy/Kbsr9Y3FdEREIIYIxxjkQIRV1STYwTq66xLhkx3IUBoFvfhveL9k+m5rNTo5G9EktjRiPmRvdGAuB9mBGZ6Rh4d1yayWNVc4YIkGTbzGmeh+r7nYuCeDV+fhs/u/OX8idBUOIGwPWE+rtwSCuF8pefZl7VYa1az3SHXBS7Tt3gMHMwS1tbGStsI6wLV6gk1fJ/uCRSWgNiHMdJvCkN60rTJA1fzh/zESIbnX7u7dIa79TL4AYtg9vnwU1WhdcH8C+tkUpQUh2z9gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"analytics1.png\"\n        title=\"analytics1.png\"\n        src=\"/static/6d3b5d4dbcd9af423ee7b7567db69782/e17e5/analytics1.png\"\n        srcset=\"/static/6d3b5d4dbcd9af423ee7b7567db69782/e9ff0/analytics1.png 180w,\n/static/6d3b5d4dbcd9af423ee7b7567db69782/f21e7/analytics1.png 360w,\n/static/6d3b5d4dbcd9af423ee7b7567db69782/e17e5/analytics1.png 400w\"\n        sizes=\"(max-width: 400px) 100vw, 400px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n</div>\n<p><a href=\"https://janeljs.github.io/blog/google-analytics/\" target=\"_blank\">jane’s PS님의 블로그</a>를 확인해 보면 추적이 되지 않을 때 gatsby-plugin-gtag를 플러그인 최상단에 배치하라고 되어있어 처음부터 최상단에 위치시켜 놓으면 편한다..</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n   resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-plugin-gtag</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n         trackingId<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">G-XXXXXXXXXX</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 측정 ID</span>\n         head<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// head에 트래킹스크립트 넣고 싶다면 true로 설정</span>\n         anonymize<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<br>\n<ol start=\"5\">\n<li>동작 확인하기</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">yarn <span class=\"token function\">build</span> <span class=\"token punctuation\">(</span>or gatsby build<span class=\"token punctuation\">)</span>\nyarn <span class=\"token function\">deploy</span> <span class=\"token punctuation\">(</span>or gatsby deploy<span class=\"token punctuation\">)</span></code></pre></div>\n<p>gatsby 변경사항을 사이트에 업로드 한 뒤 제대로 작동하는 지 확인한다.\n<br><br></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACOElEQVQoz2WSa2/aMBiF+f9/Y5q0D1O1VptatVM1WKlo1ZaVWyEQCCGJg5OUXEjIjT4zoH2apaNXluVH5xy7Yc0HpMmGNM2IogjHsZFBxMKJGM093pSEEHjeGke46twiCCS+76rpE0Yh221MHIfMtVcaz0MDEWTI95QwrUl3Nc96yvmdycW9yUN/RHcsMIXHYKzjzDtsRJdAyXenrO0pgTtBOhpr64mGNp3hhxmbJCdOK3Z5yZO+4+4txXLfSd4NLMdBX3n0xwbSvCdwHvGdF1zjBlNvK/AQ77BfdU7AOI7ZhCFFWVFXBSOrxJQ52zQlzwvY1xyWsGaYkxbSesU3msrxJ5bTG2L7gfn8GmN5S2NhLEm2mVJ6dFcWOf1VxcLNSbOcqqqVKrLigzBYsuj9wOyeYZk9+to1YtrCHpzhaj/xl20aK8smipOj8qKiKgsFrDH9PdusUDWU7IqadfTBRs7xxucs+srNoEmnfYvx5wKjd8VKa2MYvRMwjBI8PzgBqxPQCvYkaUFruGFqJ8fInj3B6H7Dmv1GmENW0w5idI2cN5GLJkv9kYa5shSoJNvlx8iHDnsqshuBH9ecPYa0RgmlqtG3Bpj9S7zhF4R2i2t2kb3PKu4lcvWAN7s5AUvV006V/w/4atbY7/Cxh5eJxJLbo8Ol47EY/UJOviP6X3HeFFy7wlUPI9WXWSun/wEPkcdOxdTd48V7hJ/hBDvltqJrFAwmM2xzpC7fI/QOUr/DXai51vDEkL9lAd/SMpaLSgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"analytics2.png\"\n        title=\"analytics2.png\"\n        src=\"/static/83e79380b40120e33d32660571e8c226/37523/analytics2.png\"\n        srcset=\"/static/83e79380b40120e33d32660571e8c226/e9ff0/analytics2.png 180w,\n/static/83e79380b40120e33d32660571e8c226/f21e7/analytics2.png 360w,\n/static/83e79380b40120e33d32660571e8c226/37523/analytics2.png 720w,\n/static/83e79380b40120e33d32660571e8c226/302a4/analytics2.png 1080w,\n/static/83e79380b40120e33d32660571e8c226/07a9c/analytics2.png 1440w,\n/static/83e79380b40120e33d32660571e8c226/92a6b/analytics2.png 2334w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<br>\n<p><strong>블로그를 이전하면서 애널리틱스가 작동하지 않고 sitemap.xml이 제대로 생성되지 않아 한동안 방문자 추적이 전혀되지 않았다. 앞으로 미리미리 구글링 하면서 문제를 해결해야 겠다. 한달정도 방치해놨던 과거의 나야 반성하자</strong></p>\n<p><br><br></p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#jeykll%EC%97%90%EC%84%9C-gatsby%EB%A1%9C-%EC%9D%B4%EC%A0%84%ED%95%9C-%EC%9D%B4%EC%9C%A0%EB%8A%94\">Jeykll에서 Gatsby로 이전한 이유는?</a></li>\n<li><a href=\"#google-search-console%EC%97%90-gatsby-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EB%93%B1%EB%A1%9D%ED%95%98%EA%B8%B0\">Google Search Console에 gatsby 블로그 등록하기</a></li>\n<li><a href=\"#gatsby-%EB%B8%94%EB%A1%9C%EA%B7%B8%EC%97%90-google-analytics-%EC%B6%94%EC%A0%81%EC%BD%94%EB%93%9C-%EC%8B%AC%EA%B8%B0\">gatsby 블로그에 Google Analytics 추적코드 심기</a></li>\n</ul>\n</div>","excerpt":"최근 jekyll로 사용하던 블로그를 gatsby로 바꾸었다. \n처음에 jekyll을 선택했었던 이유를 github으로 시작할 생각이었고 테마가 다양했던 jekyll을 선택했었다. Jeykll에서 Gatsby로 이전한 이유는? 가장 큰 이유는 Jeykll은 Ruby로 만들어졌기 때문에 JS를 주언어로 사용하는 필자에게 어려우면서 생소했다. 프론트엔드 개발자가 많이 쓰는 gatsby는 react를 사용하는 나에게 쉬우면서도 재밌게 다가왔고 npm 플러그인을 쉽게 추가할 수 있어 다양한 기능을 다루기 수월했기 때문에 블로그 이전을 감행했다. (또한 전보다 많아진 테마도 마음에 들었다.) 나는 zoomkoding님의 zoomkoding-gatsby-blog테마를 사용하여 블로그를 개설했다. \n깃허브 테마는 심플한 테마가 많지만 zoomkoding님의 테마는 블랙/화이트 모드 선택 및 과하지 않게 동적인 요소들이 마음에 들어 이 테마로 블로그를 개설했다. Google Search Cons…","frontmatter":{"date":"October 26, 2021","title":"[gatsby] Google Search Console과 Analytics 추가하기","categories":"gatsby","author":"phrygia","emoji":"📓"},"fields":{"slug":"/gatsby-blog/"}},"next":{"id":"1729f0ee-f37b-50ff-a706-4e0566ebc60b","html":"<p><img src=\"https://i.pinimg.com/originals/f5/69/ae/f569aef9a09bec7ca74f0dcd228a5343.jpg\" alt=\"\"><br>\n<small class=\"from\" style=\"text-align:right;\">사진 출처 : <a href=\"https://www.pinterest.co.kr/pin/439734351121493066/\" target=\"_blank\">https://www.pinterest.co.kr/pin/439734351121493066/</a></small><br></p>\n<p>클로저(closure)는 자바스크립트 고유의 개념이 아니라 함수형 프로그래밍 언어에서 등장하는 보편적인 특성이다. 개념이 아니기 때문에 ECMAScript 명세서에도 클로저의 정의를 다루지 않고 있어 클로저에 대한 다양한 정의와 설명이 존재한다.<br><br></p>\n<blockquote>\n<p><em><code class=\"language-text\">자신을 내포하는 함수의 컨텍스트에 접근할 수 있는 함수</code> - 더글라스 크록포드 (자바스크립트 핵심 가이드) <br>\n<code class=\"language-text\">함수가 특정 스코프에 접근할 수 있도록 의도적으로 그 스코프에서 정의하는 것</code> - 에딘 브라운 (러닝 자바스크립트)<br>\n<code class=\"language-text\">함수를 선언할 때 만들어지는 유효범위가 사라진 후에도 호출할 수 있는 함수</code> - 존 레식 (자바스크립트 닌자 비급)<br>\n<code class=\"language-text\">이미 생명 주기상 끝난 외부 함수의 변수를 참조하는 함수</code> - 송형주 고형준 (인사이드 자바스크립트)<br>\n<code class=\"language-text\">자유변수가 있는 함수와 자유변수를 알 수 있는 환경의 결합</code> - 에릭 프리먼 (Head First Javascript programming)<br>\n<code class=\"language-text\">로컬 변수를 참조하고 있는 함수 내의 함수</code> - 야마다 요시히로 (자바스크립트 마스터북)<br>\n<code class=\"language-text\">자신이 생성되 때의 스코프에서 알 수 있었던 변수들 중 언젠가 자신이 실행될 대 사용할 변수들만을 기억하여 유지시키는 함수</code> - 유인동 (함수형 자바스크립트 프로그래밍)<br>\n<code class=\"language-text\">클로저는 함수와 함수가 선언된 어휘적 환경의 조합이다</code> - MDN</em>\n<br></p>\n</blockquote>\n<p>이처럼 많은 설명과 정의가 존재하지만 막상 그 의미를 이해하기는 쉽지않다. MDN에서는 </p>\n<div class=\"blockquote\">\n    \"A closure is the combination of a function and the lexical enviroment within which that function was declared\" <br>\n</div>\n<p>라고 소개한다. 직역하면 \"클로저는 함수와 그 함수가 선언될 당시의 lexical enviroment의 상호관계에 따른 현상\" 정도가 된다.</p> <br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABHUlEQVQoz6WSa3LCMAyEcw+wJdlKyLsJ3ICh9z/SVjIB0mmZ/uiPb+SHZrXepNK6hqqCmMEsVv8Do2r7EeM44hAZUdTI3yAn2cC0rZ/7HY8zq1WIEbUKPuYJmm29w/dMBLIeIlv7K2wfY0AIx4LflR67K4IiglPNUJuQ7OKBMKFRq8JIKcH7jiGYMGEYBqzrivP5jNoioyIoL0F3cmgTQpdxHBSHLkG7FsN8QtM1uN0+cb1ecblcME0Tcs4Fz95dR3/BXvBUm+0sELUnGV4l2Xnj7u4OXcDdeO37HsuyYJ7nMqRtW0TiknPlX7ZRyyz9pPEMecvQiBs+QJ8uM5LIK0OSZOqCyL9A738Pd/SAHNPZBPP9l3iH/MG+xwZ9AWIn+4QUbCKfAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"closure.png\"\n        title=\"closure.png\"\n        src=\"/static/b193b6ba790a5946bc3596d8448891e7/37523/closure.png\"\n        srcset=\"/static/b193b6ba790a5946bc3596d8448891e7/e9ff0/closure.png 180w,\n/static/b193b6ba790a5946bc3596d8448891e7/f21e7/closure.png 360w,\n/static/b193b6ba790a5946bc3596d8448891e7/37523/closure.png 720w,\n/static/b193b6ba790a5946bc3596d8448891e7/302a4/closure.png 1080w,\n/static/b193b6ba790a5946bc3596d8448891e7/07a9c/closure.png 1440w,\n/static/b193b6ba790a5946bc3596d8448891e7/ac25d/closure.png 2342w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>그림에서처럼 Outer내부에서 선언된 내부함수 Inner의 실행 컨텍스트가 활성화된 시점에는 Inner의 outerEnvironmentReference가 참조하는 대상인 Outer의 LexicalEnviroment에 접근이 가능하다. Outer함수에서는 Inner함수에 선언한 변수에 접근할 수 없지만 Inner함수에서는 Outer에서 선언한 변수에 접근이 가능하다. (스코프 체인) Inner함수에서 Outer함수의 변수를 참조하는 경우에 한해서 LexicalEnviroment의 상호관계에 의미가 생긴다.<br><br></p>\n<p><strong>예제 1</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">    <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">outer</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">inner</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token operator\">++</span>a<span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">inner</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">outer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">//  2</span></code></pre></div>\n<br>\n<p>위의 예제에서 outer함수에서 변수 a를 선언했고, outer함수의 내부함수인 inner 함수에서 a의 값을 1만큼 증가시킨 다음 출력한다. </p>\n<ol>\n<li>inner 함수 내부에서는 변수 a를 선언하지 않았기 때문에 environmentRecord에서 값을 찾지 못한다.</li>\n<li>inner 함수의 outerEnvironmentReference에 지정된 상위 컨텍스트의 outer의 LexicalEnviroment에 접근해서 a를 찾는다.</li>\n<li>console.log(++a)가 실행되면서 2가 출력된다.</li>\n<li>outer 함수의 실행컨텍스트가 종료되면 LexicalEnviroment에 저장된 식별자들 (a, inner)에 대한 참조를 지운다.</li>\n<li>자신을 참조하는 변수가 하나도 없게 되면서 가비지 컬렉터의 수집 대상이 된다.\n<br><br></li>\n</ol>\n<p><strong>예제 2</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">    <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">outer</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">inner</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token operator\">++</span>a<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> inner<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">var</span> outer2 <span class=\"token operator\">=</span> <span class=\"token function\">outer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">outer2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">//  2</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">outer2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">//  3</span></code></pre></div>\n<br>\n<p>예제2는 예제1과 다르게 inner 함수 자체를 반환했다. </p>\n<ol>\n<li>outer 함수의 실행 컨텍스트가 종료될 때 outer2 변수는 outer의 실행 결과의 inner 함수를 참조한다.</li>\n<li>console.log(outer2())를 호출하면 반환된 함수인 inner가 실행된다.</li>\n<li>inner 함수의 실행 컨텍스트의 environmentRecord에는 수집할 정보가 없다. (실행종료 상태이기 때문에)</li>\n<li>inner 함수는 내부 함수이기 때문에 outer-EnvironmentReference에는 inner 함수가 선언된 위치의 LexicalEnviroment가(outer 함수의 LexicalEnviroment가) 참조복사 된다.</li>\n<li>스코프 체이닝에 따라 outer에서 선언한 변수 a에 접근해서 1만큼 증가시킨 값인 2를 반환하고, inner 함수의 실행 컨텍스트가 종료된다.</li>\n<li>다시 console.log(outer2())를 호출하면 a의 값을 증가시킨 값인 3을 반환한다.</li>\n</ol>\n<br>\n*inner 함수의 실행 시점에는 outer 함수는 이미 실행 종료된 상태이지만 outer함수의 LexicalEnviroment에 접근이 가능하다. 그 이유는 가비지 컬렉터가 어떤 값을 참조하는 변수가 있다면 수집 대상에 포함하지 않기 때문이다.\n<p>종합해보면 <strong>클로저란 어떤 함수 A에서 선언한 변수 a를 참조하는 내부함수 B를 외부로 전달할 경우 A의 실행 컨텍스트가 종료된 이후에도 변수 a가 사라지지 않는 현상</strong>을 말한다. (가비지 컬렉팅되지 않기 때문에)\n<br><br><br></p>\n<h2 id=\"클로저와-메모리-관리\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%A1%9C%EC%A0%80%EC%99%80-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EA%B4%80%EB%A6%AC\" aria-label=\"클로저와 메모리 관리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>클로저와 메모리 관리</h2>\n<p>‘메모리 누수’라는 표현은 어떤 값의 참조 카운트가 0이 되지 않아 가비지 컬렉터의 수거 대상이 되지 않는 경우에 발생한다. 클로저는 어떤 필요에 의해 의도적으로 함수의 지역변수가 메모리를 소모하도록 함으로써 발생한다. 그 필요성이 사라진 시점에 참조 카운트를 0으로 만들어 주면 가비지 컬렉터가 수거하고 메모리 누수를 막을 수 있다. (참조 카운트를 0으로 만드는 방법은 식별자에 기본형 데이터(null, undefined)를 할당하면 된다.)<br><br></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// setInterval에 의한 클로저의 메모리 해제</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> intervalId <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">inner</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">++</span>a <span class=\"token operator\">>=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>intervalId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            inner <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// inner 식별자의 함수 참조를 끊음</span>\n        <span class=\"token punctuation\">}</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    intervalId <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span>inner<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><br><br></p>\n<h2 id=\"클로저-활용방법\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%A1%9C%EC%A0%80-%ED%99%9C%EC%9A%A9%EB%B0%A9%EB%B2%95\" aria-label=\"클로저 활용방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>클로저 활용방법</h2>\n<ol>\n<li>콜백 함수 내부에서 외부 데이터를 사용하고자 할 때</li>\n<li>접근 권한 제어(정보은닉) </li>\n<li>부분 적용 함수</li>\n<li>커링 함수</li>\n</ol>\n<br>\n<p><small class=\"from add\">참고 : 코어 자바스크립트(정재남)</small></p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%ED%81%B4%EB%A1%9C%EC%A0%80%EC%99%80-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EA%B4%80%EB%A6%AC\">클로저와 메모리 관리</a></li>\n<li><a href=\"#%ED%81%B4%EB%A1%9C%EC%A0%80-%ED%99%9C%EC%9A%A9%EB%B0%A9%EB%B2%95\">클로저 활용방법</a></li>\n</ul>\n</div>","frontmatter":{"date":"September 21, 2021","title":"[javascript] closure (클로저)","categories":"js","author":"phrygia","emoji":"📓"},"fields":{"slug":"/closure/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://phrygia.github.io","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/gatsby-blog/","nextSlug":"/closure/","prevSlug":""}},"staticQueryHashes":["1073350324","2938748437"]}